language: java

jdk: openjdk8

arch:
  - amd64
  - arm64

before_deploy: gradle makeArchives

install:
  - sudo apt-get -y install openjdk-8-jdk wget unzip
  - wget https://services.gradle.org/distributions/gradle-5.1.1-bin.zip
  - sudo mkdir /opt/gradle
  - sudo unzip -d /opt/gradle/gradle-5.1.1-bin.zip
  - export PATH=$PATH:/opt/gradle/gradle-5.1.1/bin
  
deploy:
  provider: releases
  api_key: KBpdsl2-BiX2uNJe6d1OnA
  file:
     - "brunel-all.tar.gz"
     - "brunel-all.zip"
  skip_cleanup: true
  on:
    repo: Brunel-Visualization/Brunel
    tags: true
